"use strict";(self.webpackChunktvm_cn=self.webpackChunktvm_cn||[]).push([["49004"],{59743:function(e,t,n){n.r(t),n.d(t,{default:()=>x,frontMatter:()=>r,metadata:()=>l,assets:()=>c,toc:()=>a,contentTitle:()=>d});var l=JSON.parse('{"id":"arch/arch/benchmark","title":"Benchmark \u6027\u80FD\u65E5\u5FD7\u683C\u5F0F","description":"\u672C\u8282\u8BE6\u7EC6\u4ECB\u7ECD\u4E86\u7EDF\u4E00 benchmark \u65E5\u5FD7\u683C\u5F0F\u7684\u67B6\u6784 v0.1\u3002\u8BE5\u6A21\u5F0F\u4F7F\u5F97\u4EA4\u53C9\u5F15\u7528\u66F4\u5BB9\u6613\uFF0C\u5305\u62EC\u4E0E\u5176\u4ED6\u6846\u67B6/\u8FD0\u884C\u3001\u5B9E\u9A8C\u518D\u73B0\u3001\u6BCF\u65E5\u6027\u80FD\u56DE\u5F52\u6570\u636E\uFF0C\u4EE5\u53CA\u65E5\u5FD7\u8BB0\u5F55/\u53EF\u89C6\u5316\u5DE5\u4F5C\u7684\u5206\u79BB\u3002","source":"@site/docs/arch/arch/12-benchmark.md","sourceDirName":"arch/arch","slug":"/arch/arch/benchmark","permalink":"/docs/tvm-cn/docs/arch/arch/benchmark","draft":false,"unlisted":false,"editUrl":"https://github.com/hyperai/tvm-cn/edit/master/docs/arch/arch/12-benchmark.md","tags":[],"version":"current","lastUpdatedBy":"sparanoid","lastUpdatedAt":1744717810000,"sidebarPosition":220,"frontMatter":{"title":"Benchmark \u6027\u80FD\u65E5\u5FD7\u683C\u5F0F","sidebar_position":220},"sidebar":"tutorialSidebar","previous":{"title":"Convert Layout Pass","permalink":"/docs/tvm-cn/docs/arch/arch/convert_layout"},"next":{"title":"TensorFlow \u524D\u7AEF","permalink":"/docs/tvm-cn/docs/arch/arch/tensorflow"}}'),s=n("74132"),i=n("21494");let r={title:"Benchmark \u6027\u80FD\u65E5\u5FD7\u683C\u5F0F",sidebar_position:220},d="Benchmark \u6027\u80FD\u65E5\u5FD7\u683C\u5F0F",c={},a=[{value:"\u65E5\u5FD7\u683C\u5F0F\u6982\u8FF0",id:"\u65E5\u5FD7\u683C\u5F0F\u6982\u8FF0",level:2},{value:"\u5B58\u50A8\u683C\u5F0F",id:"\u5B58\u50A8\u683C\u5F0F",level:2}];function o(e){let t={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"benchmark-\u6027\u80FD\u65E5\u5FD7\u683C\u5F0F",children:"Benchmark \u6027\u80FD\u65E5\u5FD7\u683C\u5F0F"})}),"\n",(0,s.jsx)(t.p,{children:"\u672C\u8282\u8BE6\u7EC6\u4ECB\u7ECD\u4E86\u7EDF\u4E00 benchmark \u65E5\u5FD7\u683C\u5F0F\u7684\u67B6\u6784 v0.1\u3002\u8BE5\u6A21\u5F0F\u4F7F\u5F97\u4EA4\u53C9\u5F15\u7528\u66F4\u5BB9\u6613\uFF0C\u5305\u62EC\u4E0E\u5176\u4ED6\u6846\u67B6/\u8FD0\u884C\u3001\u5B9E\u9A8C\u518D\u73B0\u3001\u6BCF\u65E5\u6027\u80FD\u56DE\u5F52\u6570\u636E\uFF0C\u4EE5\u53CA\u65E5\u5FD7\u8BB0\u5F55/\u53EF\u89C6\u5316\u5DE5\u4F5C\u7684\u5206\u79BB\u3002"}),"\n",(0,s.jsx)(t.h2,{id:"\u65E5\u5FD7\u683C\u5F0F\u6982\u8FF0",children:"\u65E5\u5FD7\u683C\u5F0F\u6982\u8FF0"}),"\n",(0,s.jsxs)(t.p,{children:["\u7B80\u5355\u8D77\u89C1\uFF0C\u5EFA\u8BAE\u4F18\u5148\u5904\u7406 ",(0,s.jsx)(t.em,{children:"workload"}),"\uFF0C",(0,s.jsx)(t.em,{children:"engine"}),"\uFF0C",(0,s.jsx)(t.em,{children:"hardware runtime_ms_mean"})," \u548C ",(0,s.jsx)(t.em,{children:"runtime_ms_std"})," \u5B57\u6BB5\u3002\u66F4\u7EC6\u7C92\u5EA6\u7684\u65E5\u5FD7\u8BB0\u5F55\uFF0C\u53EF\u4EE5\u53E6\u5916\u4F20\u64AD *",(0,s.jsx)(t.em,{children:"_config"})," \u5B57\u6BB5\u3002"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"header"})}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"examples"})}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"category"})}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:(0,s.jsx)(t.strong,{children:"notes/justification"})})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"workload"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"resnet-18"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"workload"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"name of workload"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"engine"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u201Ctvm\u201D / \u201Connxruntime\u201D"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"compiler"}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"hardware"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u201Cgcp-c2-standard-16\u201D"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"hardware"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"descriptor of target hardware environment"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"runtime_ms_mean"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"12.452"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"statistics"}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"runtime_ms_std"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"5.3"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"statistics"}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"timestamp"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"1572282699.6"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"metadata"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"indicates when this record is logged"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"schema_version"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u201C0.1\u201D"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"metadata"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"ensure reproducibility as we iterate on this schema"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"metadata"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"{ \u201Cdocker_tag\u201D:\u201Dgcr.io/\u2026/0a680\u201D, \u2026 }"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"metadata"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"docker_tag is optional"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"workload_args"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"{\u201Cinput_name\u201D: \u201CInput3\u201D, \u201Cinput_shape\u201D: [list_of_shape], \u201Cdata_layout\u201D: NHCW}"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"workload"}),(0,s.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"workload_metadata"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"{\u201Cclass\u201D: \u201Cvision\u201D,\u201Ddoc_url\u201D: \u201Chttps://github.com/.../README.md\u201D, \u201Copset\u201D: 7,\u201Dtype\u201D: \u201Cbody_analysis\u201D,\u201Durl\u201D: \u201Chttps://onnxzoo...ferplus.tar.gz\u201D, \u201Cmd5\u201D: \u201C07fc7\u2026\u201D}"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"workload"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"source of workload"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"engine_version"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"\u201C1.0.5\u201D"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"compiler"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"use semvar format"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"engine_config"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"{\u201Cllvm\u201D: \u201Cllvm-8\u201D, \u201Cnvcc\u201D: 10.1, \u201Caccelerator\u201D: \u201CMLAS\u201D, \u201Crelay_opt_level\u201D: 3, \u201Ctvm_target\u201D:\u201Dllvm -mcpu=cascadelake\u201D}"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"compiler"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"fields are optionally specified"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"compilation_config"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"{\u201Copt_level\u201D: 3, \u201Clayer_schedules\u201D:[]/ <SHA_to_schedules>}"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"compiler"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"fields are optionally specified"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"software_config"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"{\u201Cos\u201D: \u201Cubuntu:18.04\u201D,\u201Dpip\u201D: { \u201Cdocker\u201D: \u201C4.1.0\u201D, \u201Cgitpython\u201D: \u201C3.0.4\u201D, \u201Cnumpy\u201D: \u201C1.17.4\u201D, \u201Connx\u201D: \u201C1.6.0\u201D}, \u201Ccudnn\u201D: \u201Ccudnn-8\u201D, \u201Ccuda_driver\u201D: \u201C480.10.1\u201D}"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"backend"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"env dependency list"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"runtime_config"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"{\u201Cnum_cpu_threads\u201D: 3}"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"backend"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"info on non-hardware, non-software metadata"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"hardware_config"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"{\u201Ccpu_count\u201D: 16, \u201Ccloud_machine_type\u201D:\u201Dc2-standard-16\u201D, \u201Cmemory_GB\u201D:64}"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"hardware"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"json descriptor of target hardware environment"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"execution_config"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"{\u201Cnumber\u201D: 1, \u201Crepeat\u201D: 10, \u201Cmin_repeat_ms\u201D, 0}"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"statistics"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"workload execution parameters"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"metrics"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"{\u201Caccuracy\u201D: 48.5,\u201Ccompilation_ms_mean\u201D: 12}"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"statistics"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"other metrics"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"runtime_raw"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.code,{children:"[{\u201Cruntime_ms\u201D: 12, \u2026}, {\u201Cruntime_ms\u201D:13,\u2026},\u2026]"})}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"statistics"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"optional raw metrics array"})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"\u5B58\u50A8\u683C\u5F0F",children:"\u5B58\u50A8\u683C\u5F0F"}),"\n",(0,s.jsx)(t.p,{children:"\u76EE\u524D\uFF0C\u4E3A\u4E86\u53EF\u6269\u5C55\u6027\u548C\u4FBF\u5229\u6027\uFF0C\u6B63\u5728\u5C06 benchmark \u6570\u636E\u539F\u578B\u5316\u4E3A JSON \u5BF9\u8C61\uFF0C\u5C24\u5176\u662F\u5728\u6A21\u5F0F\u7684\u65E9\u671F\u7248\u672C\u4E2D\u3002\u4F46\u662F\uFF0C\u968F\u7740\u6211\u4EEC\u6269\u5927 benchmark \u805A\u5408\uFF0C\u5E76\u7A33\u5B9A\u53C2\u6570\uFF0C\u9884\u8BA1\u4F1A\u5207\u6362\u6210\u5217\u683C\u5F0F\uFF0C\u4F8B\u5982 Arrow \u6216 Parquet\u3002"}),"\n",(0,s.jsx)(t.p,{children:"\u4EE5\u4E0B\u662F\u7F16\u7801\u4E3A JSON \u7684\u793A\u4F8B\u6570\u636E\uFF1A"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",children:'{\n  "workload":"arcface_resnet100",\n  "engine":"tvm",\n  "hardware":"gcp-c2-standard-16",\n  "runtime_ms_mean":109.43004820081924,\n  "runtime_ms_std":0.09078385126800587,\n  "timestamp":"20191123003411",\n  "schema_version":"0.1",\n  "metadata":{\n    "docker_tag":"tlcpack/ci-gpu:v0.53"\n  },\n  "workload_args":{\n    "input_shape_dict":{\n      "data":[\n        1,\n        3,\n        112,\n        112\n      ]\n    },\n    "input_type_dict":{\n      "data":"float32"\n    },\n    "input_value_dict":{}\n  },\n  "workload_metadata":{\n    "class":"vision",\n    "doc_url":"https://github.com/onnx/models/blob/main/vision/body_analysis/arcface/README.md",\n    "md5":"66074b860f905295aab5a842be57f37d",\n    "opset":8,\n    "type":"body_analysis",\n    "url":"https://s3.amazonaws.com/onnx-model-zoo/arcface/resnet100/resnet100.tar.gz"\n  },\n  "engine_version":"1.0.0",\n  "engine_config":{},\n  "compilation_config":{\n    "relay_opt_level": 3\n  },\n  "software_config":{\n    "os":"ubuntu:18.04",\n    "pip":{\n      "docker":"4.1.0",\n      "gitpython":"3.0.4",\n      "numpy":"1.17.4",\n      "onnx":"1.6.0"\n    }\n  },\n  "runtime_config":{},\n  "hardware_config":{\n    "cloud_machine_type":"c2-standard-16",\n    "cloud_provider":"GCP",\n    "cpu_count":16,\n    "cpu_platform":"Intel Cascade Lake",\n    "memory_GB":64\n  },\n  "execution_config":{},\n  "metrics":{}\n}\n'})})]})}function x(e={}){let{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},21494:function(e,t,n){n.d(t,{Z:function(){return d},a:function(){return r}});var l=n(39546);let s={},i=l.createContext(s);function r(e){let t=l.useContext(i);return l.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),l.createElement(i.Provider,{value:t},e.children)}}}]);