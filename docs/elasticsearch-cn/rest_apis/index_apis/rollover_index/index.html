<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-rest_apis/index_apis/rollover_index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">翻转 API | Elasticsearch 中文文档</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://lzw.me/docs/elasticsearch-cn/rest_apis/index_apis/rollover_index"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="keywords" content="Elastic,Elasticsearch,Elasticsearch api,ElasticStack,ELK,Document,docs,文档,中文文档,入门"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="翻转 API | Elasticsearch 中文文档"><meta data-rh="true" name="description" content="为数据流或索引别名创建一个新的索引。"><meta data-rh="true" property="og:description" content="为数据流或索引别名创建一个新的索引。"><link data-rh="true" rel="icon" href="/docs/elasticsearch-cn/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lzw.me/docs/elasticsearch-cn/rest_apis/index_apis/rollover_index"><link data-rh="true" rel="alternate" href="https://lzw.me/docs/elasticsearch-cn/rest_apis/index_apis/rollover_index" hreflang="zh"><link data-rh="true" rel="alternate" href="https://lzw.me/docs/elasticsearch-cn/rest_apis/index_apis/rollover_index" hreflang="x-default"><script src="https://lzw.me/x/lib/utils/h5-common.min.js"></script><link rel="stylesheet" href="/docs/elasticsearch-cn/assets/css/styles.a40c990e.css">
<link rel="preload" href="/docs/elasticsearch-cn/assets/js/runtime~main.4a16cc88.js" as="script">
<link rel="preload" href="/docs/elasticsearch-cn/assets/js/main.15caa9bc.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/elasticsearch-cn/"><div class="navbar__logo"><img src="/docs/elasticsearch-cn/img/favicon.ico" alt="elasticsearch Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docs/elasticsearch-cn/img/favicon.ico" alt="elasticsearch Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Elasticsearch 中文文档</b></a></div><div class="navbar__items navbar__items--right"><a href="https://lzw.me/docs/elasticsearch-cn/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">首页<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://docs.bookhub.tech" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">中文文档<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/dev2007/elasticsearch-doc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub 仓库"></a><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/elasticsearch-cn/">Elasticsearch 翻译说明</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/elasticsearch-cn/intro/">什么是 Elasticsearch？</a><button aria-label="打开/收起侧边栏菜单「什么是 Elasticsearch？」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/elasticsearch-cn/getting_started/">Elasticsearch 入门</a><button aria-label="打开/收起侧边栏菜单「Elasticsearch 入门」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/elasticsearch-cn/set_up_elasticsearch/">设置 Elasticsearch</a><button aria-label="打开/收起侧边栏菜单「设置 Elasticsearch」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/elasticsearch-cn/index_modules/">索引模块</a><button aria-label="打开/收起侧边栏菜单「索引模块」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/elasticsearch-cn/rest_apis/">REST API</a><button aria-label="打开/收起侧边栏菜单「REST API」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/api_convention/">API 约定</a><button aria-label="打开/收起侧边栏菜单「API 约定」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/autoscaling_apis/">自动伸缩 API</a><button aria-label="打开/收起侧边栏菜单「自动伸缩 API」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/behavioral_analytics_apis/">行为分析 API</a><button aria-label="打开/收起侧边栏菜单「行为分析 API」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/cluster_apis/">集群 API</a><button aria-label="打开/收起侧边栏菜单「集群 API」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/data_stream_apis/">数据流 API</a><button aria-label="打开/收起侧边栏菜单「数据流 API」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/document_apis/">文档 API</a><button aria-label="打开/收起侧边栏菜单「文档 API」" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/">索引 API</a><button aria-label="打开/收起侧边栏菜单「索引 API」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/alias_exists">别名存在 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/aliases">别名 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/analyze">分析 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/analyze_index_disk_usage">分析索引磁盘的使用 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/clear_cache">清除缓存 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/clone_index">复制索引</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/close_index">关闭索引 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/create_index">创建索引 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/create_or_update_index_alias">创建或更新索引别名 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/create_or_update_component_template">创建或更新组件模板 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/create_or_update_index_template">创建或更新索引模板 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/delete_component_template">删除组件模板 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/delete_dangling_index">删除悬空索引 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/delete_index_alias">删除索引别名</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/delete_index">删除索引 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/delete_index_template">删除索引模板 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/index_exists">索引存在 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/flush">冲刷 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/force_merge">强制合并 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/freeze_index">冻结索引 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/get_index_alias">获取索引别名 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/get_component_template">获取组件模板 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/get_field_mapping">获取字段映射 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/get_index">获取索引 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/get_index_settings">获取索引设置 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/get_index_template">获取索引模板 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/get_mapping">获取映射 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/import_dangling_index">导入悬空索引 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/index_recovery">索引恢复 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/index_segments">索引段 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/index_shard_stores">索引分片存储 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/index_stats">索引统计 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/list_dangling_indices">列出悬空索引 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/open_index">开启索引 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/refresh">刷新 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/resolve_index">解析索引 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/rollover_index">翻转 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/shrink_index">收缩索引 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/simulate_index">模拟索引 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/simulate_template">模拟索引模板 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/split_index">拆分索引</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/synced_flush">同步冲刷</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/type_exists">类型存在 API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/unfreeze_index">解冻索引 API [X-Pack]</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/update_index_settings">更新索引设置</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/index_apis/update_mapping">更新映射 API</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/elasticsearch-cn/rest_apis/search_apis/">搜索相关 API</a><button aria-label="打开/收起侧边栏菜单「搜索相关 API」" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/docs/elasticsearch-cn/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/elasticsearch-cn/rest_apis/"><span itemprop="name">REST API</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/elasticsearch-cn/rest_apis/index_apis/"><span itemprop="name">索引 API</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">翻转 API</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>翻转 API</h1><p>为<a href="/docs/elasticsearch-cn/data_streams/data_streams">数据流</a>或<a href="/docs/elasticsearch-cn/rest_apis/index_apis/create_or_update_index_alias">索引别名</a>创建一个新的索引。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">POST my-data-stream/_rollover</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="请求">请求<a href="#请求" class="hash-link" aria-label="请求的直接链接" title="请求的直接链接">​</a></h2><p><code>POST /&lt;rollover-target&gt;/_rollover/</code></p><p><code>POST /&lt;rollover-target&gt;/_rollover/&lt;target-index&gt;</code></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="前置条件">前置条件<a href="#前置条件" class="hash-link" aria-label="前置条件的直接链接" title="前置条件的直接链接">​</a></h2><ul><li>如果 Elasticsearch 安全特性启用，你对翻转目标必须有 <code>manage</code> <a href="/docs/elasticsearch-cn/secure_the_elastic_statck/user_authorization/security_privileges#%E7%B4%A2%E5%BC%95%E6%9D%83%E9%99%90">索引权限</a>。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="描述">描述<a href="#描述" class="hash-link" aria-label="描述的直接链接" title="描述的直接链接">​</a></h2><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>提示</div><div class="admonitionContent_S0QG"><p>我们推荐使用 ILM 的<a href="/docs/elasticsearch-cn/ILM_manage_the_index_lifecycle/index_lifecycle_actions/rollover">翻转</a>操作来自动执行翻转。参阅<a href="/docs/elasticsearch-cn/set_up_elasticsearch/index_lifecycle">索引生命周期</a></p></div></div><p>翻转 API 为数据流或索引别名创建一个新索引。API 的行为依赖翻转的目标。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="翻转数据流">翻转数据流<a href="#翻转数据流" class="hash-link" aria-label="翻转数据流的直接链接" title="翻转数据流的直接链接">​</a></h3><p>如果你翻转数据流，API 将为数据流创建一个新的写索引。流的前一个写索引会变为常规的协助索引。翻转还会增加数据流的辈分（generation）。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="翻转带有写索引的索引别名">翻转带有写索引的索引别名<a href="#翻转带有写索引的索引别名" class="hash-link" aria-label="翻转带有写索引的索引别名的直接链接" title="翻转带有写索引的索引别名的直接链接">​</a></h3><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>提示</div><div class="admonitionContent_S0QG"><p>在 Elasticsearch 7.9 之前，你通常会使用带有写索引的<a href="/docs/elasticsearch-cn/rest_apis/index_apis/create_or_update_index_alias">索引别名</a>来管理时序数据。数据流取代了这一功能，需要较少的维护，并自动与数据层集成。
参阅<a href="/docs/elasticsearch-cn/data_streams/set_up_a_data_stream#%E8%BD%AC%E6%8D%A2%E7%B4%A2%E5%BC%95%E5%88%AB%E5%90%8D%E4%B8%BA%E6%95%B0%E6%8D%AE%E6%B5%81">转换索引别名为数据流</a>。</p></div></div><p>如果一个索引别名指向多个索引，其中一个索引必须为<a href="/docs/elasticsearch-cn/rest_apis/index_apis/aliases#%E5%86%99%E7%B4%A2%E5%BC%95">写索引</a>。翻转 API 为别名创建一个新的写索引，并将它的 <code>is_write_index</code> 设置为 <code>true</code>。API 也会将前一个写索引设置 <code>is_write_index</code> 为 <code>false</code>。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="翻转带有一个索引的索引别名">翻转带有一个索引的索引别名<a href="#翻转带有一个索引的索引别名" class="hash-link" aria-label="翻转带有一个索引的索引别名的直接链接" title="翻转带有一个索引的索引别名的直接链接">​</a></h3><p>如果你翻转仅指向一个索引的索引别名，API 将为别名创建新索引，并从别名移除原始索引。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="为别名增加索引名字">为别名增加索引名字<a href="#为别名增加索引名字" class="hash-link" aria-label="为别名增加索引名字的直接链接" title="为别名增加索引名字的直接链接">​</a></h2><p>当你翻转索引别名时，你可以为新索引指定名字。如果你不指定名字，且当前索引以 <code>-</code> 和数字结尾，比如 <code>my-index-000001</code> 或 <code>my-index-3</code>，新的索引名字会增加数字。例如，你翻转一个带有当前索引名字为 <code>my-index-000001</code> 的别名，翻转操作会创建一个名为 <code>my-index-000002</code> 的新索引。无论前一个索引名字是什么，这个数字总是 6 个字符并以 0 填充。</p><blockquote><p><strong>将日期数学与索引别名翻转一起使用</strong>
如果你为时序数据使用索引别名，你可以在索引名字中使用<a href="/docs/elasticsearch-cn/rest_apis/api_convention/date_math_support_in_index_names">日期数学</a>以追踪翻转日期。例如，你可以创建一个指向索引名为 <code>&lt;my-index-{now/d}-000001&gt;</code> 的别名。如果你在2099年5月6日创建索引，索引名为 <code>my-index-2099.05.06-000001</code>。如果你在2099年5月7日翻转这个别名，新索引的名字为 <code>my-index-2099.05.07-000002</code>。例如，参阅<a href="/docs/elasticsearch-cn/rest_apis/index_apis/rollover_index#%E7%BF%BB%E8%BD%AC%E5%B8%A6%E6%9C%89%E5%86%99%E7%B4%A2%E5%BC%95%E7%9A%84%E7%B4%A2%E5%BC%95%E5%88%AB%E5%90%8D">翻转带有写索引的索引别名</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="等待活动分片">等待活动分片<a href="#等待活动分片" class="hash-link" aria-label="等待活动分片的直接链接" title="等待活动分片的直接链接">​</a></h2><p>翻转创建一个新的索引，并受限于设置 <a href="/docs/elasticsearch-cn/rest_apis/index_apis/create_index#%E7%AD%89%E5%BE%85%E6%B4%BB%E5%8A%A8%E5%88%86%E7%89%87"><code>wait_for_active_shards</code></a>。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="路径参数">路径参数<a href="#路径参数" class="hash-link" aria-label="路径参数的直接链接" title="路径参数的直接链接">​</a></h2><ul><li><p><code>&lt;rollover-target&gt;</code></p><p>（必需的，字符串）待翻转的数据流或索引别名的名字。</p></li><li><p><code>&lt;target-index&gt;</code></p><p>（可选的，字符串）创建的目标索引名称。支持<a href="/docs/elasticsearch-cn/rest_apis/api_convention/date_math_support_in_index_names">日期数学</a>。数据流不支持这个参数。</p><p>如果别名的当前写索引的名字不以 <code>-</code> 和数字结尾，例如 <code>my-index-000001</code> 或 <code>my-index-3</code>,这个参数是必需的。</p><p>索引名字必须符合以下约定：</p><ol><li>只能是小写字符</li><li>不能包含字符：<code>\</code>、<code>/</code>、<code>*</code>、<code>?</code>、<code>&quot;</code>、<code>&lt;</code>、<code>&gt;</code>、<code>|</code>、<code> </code>(空格)、<code>,</code>、<code>#</code></li><li>7.0 之前索引可以包含冒号（:），但在 7.0 之后不推荐。</li><li>不能以 <code>-</code>、<code>_</code>、<code>+</code> 开头</li><li>不能是 <code>.</code> 或 <code>..</code></li><li>长度不能超过 255 字节（注意是字节，所以多字节字符会更快达到 255 的限制）</li><li>名字以 <code>.</code> 开头不推荐，除非由插件管理的<a href="/docs/elasticsearch-cn/index_modules">隐藏索引</a>和内部索引</li></ol></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="查询参数">查询参数<a href="#查询参数" class="hash-link" aria-label="查询参数的直接链接" title="查询参数的直接链接">​</a></h2><ul><li><p><code>dry_run</code></p><p>（可选，布尔值）如果为 <code>true</code>，则检查当前索引是否匹配一个或多个指定条件（<code>conditions</code>），但不执行翻转。默认为 <code>false</code>。</p></li><li><p><code>include_type_name</code></p><p>[<del>7.0.0</del>开始不推荐]<!-- -->（可选，布尔值）如果为 <code>true</code>,映射体中需要映射类型。默认为 <code>false</code>。</p></li><li><p><code>wait_for_active_shards</code></p><p>（可选，字符串）在操作执行之前必须活动的分片复制数量。设置为 <code>all</code> 或任何正整数，最大值为索引分片总数（<code>number_of_replicas+1</code>）。默认为：1，主分片。</p></li><li><p><code>master_timeout</code></p><p>（可选，<a href="/docs/elasticsearch-cn/rest_apis/api_convention/common_options#%E6%97%B6%E9%97%B4%E5%8D%95%E4%BD%8D">时间单位</a>）等待连接到主节点的时间。如果在超时过期前没有收到响应，则请求失败并返回错误。默认为 <code>30s</code>。</p></li><li><p><code>timeout</code></p><p>（可选，<a href="/docs/elasticsearch-cn/rest_apis/api_convention/common_options#%E6%97%B6%E9%97%B4%E5%8D%95%E4%BD%8D">时间单位</a>）等待响应的时间。如果在超时过期之前没有收到响应，则请求失败并返回错误。默认为 <code>30s</code>。</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="请求体">请求体<a href="#请求体" class="hash-link" aria-label="请求体的直接链接" title="请求体的直接链接">​</a></h2><ul><li><p><code>aliases</code></p><p>（可选，<a href="/docs/elasticsearch-cn/rest_apis/idnex_apis/bulk_index_alias">别名对象</a>）包含目标索引的索引别名。索引别名名字支持<a href="/docs/elasticsearch-cn/rest_apis/api_convention/date_math_support_in_index_names">日期数学</a>。</p></li></ul><p>数据流不支持这个参数。</p><ul><li><p><code>conditions</code></p><p>（可选，对象）翻转的条件。如果指定，Elasticsearch 仅在当前索引满足以下一个或多个条件时执行翻转。如果参数未指定，Elasticsearch 无条件执行翻转。</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>警告</div><div class="admonitionContent_S0QG"><p>为了触发翻转，当前索引在请求时必须满足这些条件。Elasticsearch 不会在 API 响应后监视索引。要自动化翻转，改用 ILM 的<a href="/docs/elasticsearch-cn/ILM_manage_the_index_lifecycle/index_lifecycle_actions/rollover">翻转</a>。</p></div></div></li><li><p><code>conditions</code> 的属性</p><ul><li><p><code>max_age</code></p><p>（可选，<a href="/docs/elasticsearch-cn/rest_apis/api_convention/common_options#%E6%97%B6%E9%97%B4%E5%8D%95%E4%BD%8D">时间单位</a>）在达到创建索引所用的最长时间后触发翻转。从索引创建时间开始，始终计算运行的时间，即使索引起始日期配置为自定义日期，例如当使用设置 <a href="/docs/elasticsearch-cn/set_up_elasticsearch/configuring_elasticsearch/index_lifecycle_management_settings"><code>index.lifecycle.parse_origination_date</code></a> 或 <a href="/docs/elasticsearch-cn/set_up_elasticsearch/configuring_elasticsearch/index_lifecycle_management_settings"><code>index.lifecycle.origination_date</code></a> 。</p></li><li><p><code>max_docs</code></p><p>（可选，整数）在达到指定的最大文档数后触发翻转。自上次刷新以来添加的文档不包括在文档计数中。文档计数不包括副本分片中的文档。</p></li><li><p><code>max_size</code></p><p>（可选，<a href="/docs/elasticsearch-cn/rest_apis/api_convention/common_options#%E5%AD%97%E8%8A%82%E5%A4%A7%E5%B0%8F%E5%8D%95%E4%BD%8D">字节单位</a>）当索引达到一定大小时触发翻转。这是索引中所有主分片的总大小。副本不会被计算到最大索引大小。</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>提示</div><div class="admonitionContent_S0QG"><p>为查看当前索引大小，可以使用 <a href="/docs/elasticsearch-cn/rest_apis/compact_and_aligned_text_apis/cat_indices"><code>_cat indices</code></a> API。<code>pri.store.size</code> 值显示所有主分片的组合大小。</p></div></div></li><li><p><code>max_primary_shard_size</code></p><p>（可选，<a href="/docs/elasticsearch-cn/rest_apis/api_convention/common_options#%E5%AD%97%E8%8A%82%E5%A4%A7%E5%B0%8F%E5%8D%95%E4%BD%8D">字节单位</a>）当索引中最大的主分片达到一定大小时触发翻转。主分片在索引中的最大值。同 <code>max_size</code> 一样，副本会被忽略。</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>提示</div><div class="admonitionContent_S0QG"><p>为了查看当前分片大小，可以使用 <!-- -->[<code>_cat shards</code>]<!-- --> API。<code>store</code> 值展示每个分片大小，<code>prirep</code> 指示一个分片是主分片（<code>p</code>）还是副本（<code>r</code>）。</p></div></div></li></ul></li><li><p><code>mappings</code></p><p>（可选，<a href="/docs/elasticsearch-cn/mapping/mapping">映射对象</a>）索引中字段映射。如果指定，映射可以包含：</p><ol><li>字段名字</li><li><a href="/docs/elasticsearch-cn/mapping/field_data_types">字段数据类型</a></li><li><a href="/docs/elasticsearch-cn/mapping/mapping_parameters/mapping_parameters">映射参数</a></li></ol><p>参阅<a href="/docs/elasticsearch-cn/mapping/mapping">映射</a></p><p>数据流不支持这个参数。</p></li><li><p><code>settings</code></p><p>（可选，<a href="/docs/elasticsearch-cn/index_modules#%E7%B4%A2%E5%BC%95%E8%AE%BE%E7%BD%AE">索引设置对象</a>）索引的配置选项。参阅<a href="/docs/elasticsearch-cn/index_modules#%E7%B4%A2%E5%BC%95%E8%AE%BE%E7%BD%AE">索引设置</a></p><p>数据流不支持这个参数。</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="响应体">响应体<a href="#响应体" class="hash-link" aria-label="响应体的直接链接" title="响应体的直接链接">​</a></h2><ul><li><p><code>acknowledged</code></p><p>（布尔值）如果为 <code>true</code>，请求在 <code>timeout</code> 周期内接收来自主节点的响应。</p></li><li><p><code>shards_acknowledged</code></p><p>（布尔值）如果为 <code>true</code>，请求在 <code>master_timeout</code> 周期内接收来自<a href="/docs/elasticsearch-cn/rest_apis/document_apis/docs_index#%E6%B4%BB%E5%8A%A8%E5%88%86%E7%89%87">活动分片</a>的响应。</p></li><li><p><code>old_index</code></p><p>（字符串）数据流或索引别名的前一个索引。对数据流和有写索引的索引别名，指前一个写索引。</p></li><li><p><code>new_index</code></p><p>（字符串）翻转创建的索引。对数据洲和有写索引的索引别名，指当前写索引。</p></li><li><p><code>rolled_over</code></p><p>（布尔值）如果为 <code>true</code>，数据流或索引别名翻转。</p></li><li><p><code>dry_run</code></p><p>（布尔值）如果为 <code>true</code>，Elasticsearch 不执行翻转。</p></li><li><p><code>condition</code></p><p>(对象)指定在请求的 <code>conditions</code> 里的每个条件的结果。如果未指定任何条件，这是一个空对象。</p><ul><li><p><code>condition</code> 的属性</p><ul><li><p><code>&lt;condition&gt;</code></p><p>（布尔值）键是每个条件。值是它的结果。如果为 <code>true</code>，该索引在翻转时满足条件。</p></li></ul></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="示例">示例<a href="#示例" class="hash-link" aria-label="示例的直接链接" title="示例的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="翻转数据流-1">翻转数据流<a href="#翻转数据流-1" class="hash-link" aria-label="翻转数据流的直接链接" title="翻转数据流的直接链接">​</a></h3><p>以下请求无条件翻转数据流。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">POST my-data-stream/_rollover</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果当前写索引满足一个或多个以下的条件，以下的请求只翻转数据流：</p><ul><li><p>索引在 7 天或更早前创建</p></li><li><p>索引包含 1,000 或更多的文档</p></li><li><p>索引最大的主分片是 50GB 或更大</p></li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">POST my-data-stream/_rollover</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;conditions&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;max_age&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;7d&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;max_docs&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;max_primary_shard_size&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;50gb&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>API 返回：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;acknowledged&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;shards_acknowledged&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;old_index&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;.ds-my-data-stream-2099.05.06-000001&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;new_index&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;.ds-my-data-stream-2099.05.07-000002&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;rolled_over&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;dry_run&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;conditions&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;[max_age: 7d]&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;[max_docs: 1000]&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;[max_primary_shard_size: 50gb]&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="翻转带有写索引的索引别名-1">翻转带有写索引的索引别名<a href="#翻转带有写索引的索引别名-1" class="hash-link" aria-label="翻转带有写索引的索引别名的直接链接" title="翻转带有写索引的索引别名的直接链接">​</a></h3><p>以下请求创建 <code>&lt;my-index-{now/d}-000001&gt;</code>，且将它设置为 <code>my-alias</code> 的写索引。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># PUT &lt;my-index-{now/d}-000001&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PUT %3Cmy-index-%7Bnow%2Fd%7D-000001%3E</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;aliases&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;my-alias&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;is_write_index&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果当前写索引满足一个或多个以下的条件，以下的请求只翻转别名：</p><ul><li><p>索引在 7 天或更早前创建</p></li><li><p>索引包含 1,000 或更多的文档</p></li><li><p>索引最大的主分片是 50GB 或更大</p></li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">POST my-alias/_rollover</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;conditions&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;max_age&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;7d&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;max_docs&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;max_primary_shard_size&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;50gb&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>API 返回：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;acknowledged&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;shards_acknowledged&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;old_index&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-index-2099.05.06-000001&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;new_index&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-index-2099.05.07-000002&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;rolled_over&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;dry_run&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;conditions&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;[max_age: 7d]&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;[max_docs: 1000]&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;[max_primary_shard_size: 50gb]&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果别名的索引名使用日期数学，并且你以固定的间隔翻转索引，则可以使用日期数学缩小搜索范围。例如，以下搜索目标索引是在过去三天创建的。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># GET /&lt;my-index-{now/d}-*&gt;,&lt;my-index-{now/d-1d}-*&gt;,&lt;my-index-{now/d-2d}-*&gt;/_search</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GET /%3Cmy-index-%7Bnow%2Fd%7D-*%3E%2C%3Cmy-index-%7Bnow%2Fd-1d%7D-*%3E%2C%3Cmy-index-%7Bnow%2Fd-2d%7D-*%3E/_search</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="翻转只有一个索引的索引别名">翻转只有一个索引的索引别名<a href="#翻转只有一个索引的索引别名" class="hash-link" aria-label="翻转只有一个索引的索引别名的直接链接" title="翻转只有一个索引的索引别名的直接链接">​</a></h3><p>以下请求创建 <code>&lt;my-index-{now/d}-000001&gt;</code> 以及它的别名 <code>my-write-alias</code>。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># PUT &lt;my-index-{now/d}-000001&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PUT %3Cmy-index-%7Bnow%2Fd%7D-000001%3E</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;aliases&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;my-write-alias&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如果当前索引满足一个或多个以下的条件，以下的请求只翻转别名：</p><ul><li><p>索引在 7 天或更早前创建</p></li><li><p>索引包含 1,000 或更多的文档</p></li><li><p>索引最大的主分片是 50GB 或更大</p></li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">POST my-write-alias/_rollover</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;conditions&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;max_age&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;7d&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;max_docs&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;max_primary_shard_size&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;50gb&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>API 返回：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;acknowledged&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;shards_acknowledged&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;old_index&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-index-2099.05.06-000001&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;new_index&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my-index-2099.05.07-000002&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;rolled_over&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;dry_run&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;conditions&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;[max_age: 7d]&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;[max_docs: 1000]&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;[max_primary_shard_size: 50gb]&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="在翻转时指定设置">在翻转时指定设置<a href="#在翻转时指定设置" class="hash-link" aria-label="在翻转时指定设置的直接链接" title="在翻转时指定设置的直接链接">​</a></h3><p>典型的，你可以使用<a href="/docs/elasticsearch-cn/index_templates/index_templates">索引模板</a>在翻转时自动配置索引创建。如果你翻转索引别名，你可以使用翻转 API 添加额外的索引设置或重写在模板中的设置。数据流不支持 <code>settings</code> 参数。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">POST my-alias/_rollover</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;settings&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;index.number_of_shards&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-rollover-index.html" target="_blank" rel="noopener noreferrer">原文链接</a></p></blockquote></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/elasticsearch-cn/rest_apis/index_apis/resolve_index"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">解析索引 API</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/elasticsearch-cn/rest_apis/index_apis/shrink_index"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">收缩索引 API</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#请求" class="table-of-contents__link toc-highlight">请求</a></li><li><a href="#前置条件" class="table-of-contents__link toc-highlight">前置条件</a></li><li><a href="#描述" class="table-of-contents__link toc-highlight">描述</a><ul><li><a href="#翻转数据流" class="table-of-contents__link toc-highlight">翻转数据流</a></li><li><a href="#翻转带有写索引的索引别名" class="table-of-contents__link toc-highlight">翻转带有写索引的索引别名</a></li><li><a href="#翻转带有一个索引的索引别名" class="table-of-contents__link toc-highlight">翻转带有一个索引的索引别名</a></li></ul></li><li><a href="#为别名增加索引名字" class="table-of-contents__link toc-highlight">为别名增加索引名字</a></li><li><a href="#等待活动分片" class="table-of-contents__link toc-highlight">等待活动分片</a></li><li><a href="#路径参数" class="table-of-contents__link toc-highlight">路径参数</a></li><li><a href="#查询参数" class="table-of-contents__link toc-highlight">查询参数</a></li><li><a href="#请求体" class="table-of-contents__link toc-highlight">请求体</a></li><li><a href="#响应体" class="table-of-contents__link toc-highlight">响应体</a></li><li><a href="#示例" class="table-of-contents__link toc-highlight">示例</a><ul><li><a href="#翻转数据流-1" class="table-of-contents__link toc-highlight">翻转数据流</a></li><li><a href="#翻转带有写索引的索引别名-1" class="table-of-contents__link toc-highlight">翻转带有写索引的索引别名</a></li><li><a href="#翻转只有一个索引的索引别名" class="table-of-contents__link toc-highlight">翻转只有一个索引的索引别名</a></li><li><a href="#在翻转时指定设置" class="table-of-contents__link toc-highlight">在翻转时指定设置</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">IT工具</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://tools.lzw.me" target="_blank" rel="noopener noreferrer" class="footer__link-item">有趣工具箱<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://lzw.me/x/reference/" target="_blank" rel="noopener noreferrer" class="footer__link-item">IT速查清单<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">其他文档</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://lzw.me/docs/gemini-cli-learning" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gemini CLI 中文教程<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://lzw.me/docs/quant-wiki" target="_blank" rel="noopener noreferrer" class="footer__link-item">量化百科<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://lzw.me/docs/tvm-cn/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Apache TVM 中文站<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 bookHub.tech</div></div></div></footer></div>
<script src="/docs/elasticsearch-cn/assets/js/runtime~main.4a16cc88.js"></script>
<script src="/docs/elasticsearch-cn/assets/js/main.15caa9bc.js"></script>
<script src="https://lzw.me/x/lib/utils/h5-common.js?v=016"></script></body>
</html>